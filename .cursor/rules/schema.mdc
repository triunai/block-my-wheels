Schema Structure:

public.incidents

id: UUID, primary key, generated by uuid_generate_v4()
sticker_id: UUID, foreign key to public.stickers
rage_level: INTEGER, constraint 0-10
status: ENUM('open', 'acknowledged', 'resolved', 'expired'), default 'open'
scanner_ip: INET, nullable
created_at: TIMESTAMP WITH TIME ZONE, default now()
acknowledged_at: TIMESTAMP WITH TIME ZONE, nullable
eta_minutes: INTEGER, nullable
resolved_at: TIMESTAMP WITH TIME ZONE, nullable
public.rate_limits

identifier: TEXT, part of primary key
window_start: TIMESTAMP WITH TIME ZONE, part of primary key
request_count: INTEGER, default 1
public.stickers

id: UUID, primary key, generated by uuid_generate_v4()
owner_id: UUID, foreign key to public.user_profiles
token: TEXT, unique
plate: TEXT, nullable
style: TEXT, default 'modern'
status: ENUM('active', 'inactive', 'archived'), default 'active'
created_at: TIMESTAMP WITH TIME ZONE, default now()
public.user_profiles

id: UUID, primary key, foreign key to auth.users
user_type: ENUM('driver', 'admin'), default 'driver'
phone: TEXT, unique
wa_id: TEXT, nullable
avg_response_time_minutes: NUMERIC, nullable
total_incidents: INTEGER, default 0
created_at: TIMESTAMP WITH TIME ZONE, default now()
updated_at: TIMESTAMP WITH TIME ZONE, default now()